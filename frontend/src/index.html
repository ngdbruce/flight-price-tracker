<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Flight Price Tracker - Monitor flight prices and get notified when prices drop">
    <meta name="keywords" content="flight tracker, price monitoring, flight deals, travel">
    <title>Flight Price Tracker</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles/main.css" as="style">
    <link rel="preload" href="scripts/main.js" as="script">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/main.css">
    
    <!-- Icons and favicons -->
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="icon" type="image/png" href="assets/favicon.png">
    
    <!-- Open Graph meta tags for social sharing -->
    <meta property="og:title" content="Flight Price Tracker">
    <meta property="og:description" content="Monitor flight prices and get notified when prices drop">
    <meta property="og:type" content="website">
    
    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#2563eb">
</head>
<body>
    <!-- Skip to main content link for screen readers -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Header -->
    <header class="header" role="banner">
        <div class="container">
            <div class="header__content">
                <h1 class="header__title">
                    <span class="header__icon" aria-hidden="true">✈️</span>
                    Flight Price Tracker
                </h1>
                <nav class="nav" role="navigation" aria-label="Main navigation">
                    <ul class="nav__list">
                        <li class="nav__item">
                            <a href="#" class="nav__link nav__link--active" aria-current="page">Track Flight</a>
                        </li>
                        <li class="nav__item">
                            <a href="tracking.html" class="nav__link">My Tracking</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="main" role="main">
        <div class="container">
            <!-- Hero Section -->
            <section class="hero" role="banner">
                <h2 class="hero__title">Never Miss a Flight Deal</h2>
                <p class="hero__description">
                    Track flight prices and get instant Telegram notifications when prices drop. 
                    Set up price alerts for your favorite routes and save money on your next trip.
                </p>
            </section>

            <!-- Flight Tracking Form -->
            <section class="form-section" role="region" aria-labelledby="form-title">
                <h2 id="form-title" class="form-section__title">Set Up Price Alert</h2>
                
                <!-- System Messages -->
                <div id="system-messages" class="messages" role="alert" aria-live="polite" aria-atomic="true">
                    <!-- Success/Error messages will be inserted here -->
                </div>

                <form id="tracking-form" class="tracking-form" novalidate>
                    <!-- Trip Type Selection -->
                    <fieldset class="form-group form-group--radio">
                        <legend class="form-label">Trip Type</legend>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input 
                                    type="radio" 
                                    id="round-trip" 
                                    name="tripType" 
                                    value="round-trip" 
                                    class="radio-input" 
                                    checked
                                    aria-describedby="trip-type-help"
                                >
                                <label for="round-trip" class="radio-label">Round Trip</label>
                            </div>
                            <div class="radio-item">
                                <input 
                                    type="radio" 
                                    id="one-way" 
                                    name="tripType" 
                                    value="one-way" 
                                    class="radio-input"
                                    aria-describedby="trip-type-help"
                                >
                                <label for="one-way" class="radio-label">One Way</label>
                            </div>
                        </div>
                        <div id="trip-type-help" class="form-help">Choose whether you need a round-trip or one-way ticket</div>
                    </fieldset>

                    <!-- Flight Details -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="origin" class="form-label">
                                From <span class="required" aria-label="required">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="origin" 
                                name="origin" 
                                class="form-input" 
                                placeholder="e.g., JFK or New York"
                                maxlength="3"
                                required
                                aria-describedby="origin-help origin-error"
                                autocomplete="off"
                                data-validation="iata"
                            >
                            <div id="origin-help" class="form-help">Enter 3-letter airport code (IATA)</div>
                            <div id="origin-error" class="form-error" role="alert" aria-live="polite"></div>
                        </div>

                        <div class="form-group">
                            <button type="button" class="swap-button" aria-label="Swap origin and destination airports">
                                <span class="swap-icon" aria-hidden="true">⇄</span>
                            </button>
                        </div>

                        <div class="form-group">
                            <label for="destination" class="form-label">
                                To <span class="required" aria-label="required">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="destination" 
                                name="destination" 
                                class="form-input" 
                                placeholder="e.g., LAX or Los Angeles"
                                maxlength="3"
                                required
                                aria-describedby="destination-help destination-error"
                                autocomplete="off"
                                data-validation="iata"
                            >
                            <div id="destination-help" class="form-help">Enter 3-letter airport code (IATA)</div>
                            <div id="destination-error" class="form-error" role="alert" aria-live="polite"></div>
                        </div>
                    </div>

                    <!-- Date Selection -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="departure-date" class="form-label">
                                Departure Date <span class="required" aria-label="required">*</span>
                            </label>
                            <input 
                                type="date" 
                                id="departure-date" 
                                name="departureDate" 
                                class="form-input" 
                                required
                                aria-describedby="departure-date-help departure-date-error"
                                min=""
                            >
                            <div id="departure-date-help" class="form-help">Select your departure date</div>
                            <div id="departure-date-error" class="form-error" role="alert" aria-live="polite"></div>
                        </div>

                        <div class="form-group" id="return-date-group">
                            <label for="return-date" class="form-label">
                                Return Date <span class="required" aria-label="required">*</span>
                            </label>
                            <input 
                                type="date" 
                                id="return-date" 
                                name="returnDate" 
                                class="form-input" 
                                aria-describedby="return-date-help return-date-error"
                                min=""
                            >
                            <div id="return-date-help" class="form-help">Select your return date</div>
                            <div id="return-date-error" class="form-error" role="alert" aria-live="polite"></div>
                        </div>
                    </div>

                    <!-- Passengers and Class -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="passengers" class="form-label">
                                Passengers <span class="required" aria-label="required">*</span>
                            </label>
                            <select 
                                id="passengers" 
                                name="passengers" 
                                class="form-select" 
                                required
                                aria-describedby="passengers-help passengers-error"
                            >
                                <option value="">Select passengers</option>
                                <option value="1">1 Passenger</option>
                                <option value="2">2 Passengers</option>
                                <option value="3">3 Passengers</option>
                                <option value="4">4 Passengers</option>
                                <option value="5">5 Passengers</option>
                                <option value="6">6 Passengers</option>
                                <option value="7">7 Passengers</option>
                                <option value="8">8 Passengers</option>
                                <option value="9">9 Passengers</option>
                            </select>
                            <div id="passengers-help" class="form-help">Number of travelers</div>
                            <div id="passengers-error" class="form-error" role="alert" aria-live="polite"></div>
                        </div>

                        <div class="form-group">
                            <label for="cabin-class" class="form-label">Cabin Class</label>
                            <select 
                                id="cabin-class" 
                                name="cabinClass" 
                                class="form-select"
                                aria-describedby="cabin-class-help"
                            >
                                <option value="ECONOMY">Economy</option>
                                <option value="PREMIUM_ECONOMY">Premium Economy</option>
                                <option value="BUSINESS">Business</option>
                                <option value="FIRST">First Class</option>
                            </select>
                            <div id="cabin-class-help" class="form-help">Preferred cabin class for pricing</div>
                        </div>
                    </div>

                    <!-- Price Threshold -->
                    <div class="form-group">
                        <label for="max-price" class="form-label">Maximum Price Alert (Optional)</label>
                        <div class="input-group">
                            <span class="input-prefix" aria-hidden="true">$</span>
                            <input 
                                type="number" 
                                id="max-price" 
                                name="maxPrice" 
                                class="form-input form-input--with-prefix" 
                                placeholder="500"
                                min="1"
                                max="50000"
                                step="1"
                                aria-describedby="max-price-help max-price-error"
                            >
                        </div>
                        <div id="max-price-help" class="form-help">Get notified only if price is below this amount (USD)</div>
                        <div id="max-price-error" class="form-error" role="alert" aria-live="polite"></div>
                    </div>

                    <!-- Telegram Configuration -->
                    <fieldset class="form-group form-group--fieldset">
                        <legend class="form-label">Telegram Notifications</legend>
                        
                        <div class="form-group">
                            <label for="telegram-chat-id" class="form-label">
                                Telegram Chat ID <span class="required" aria-label="required">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="telegram-chat-id" 
                                name="telegramChatId" 
                                class="form-input" 
                                placeholder="123456789"
                                required
                                aria-describedby="telegram-help telegram-error"
                                pattern="^-?\d+$"
                            >
                            <div id="telegram-help" class="form-help">
                                <p>Your Telegram chat ID for price alerts.</p>
                                <details class="help-details">
                                    <summary class="help-summary">How to find your Chat ID?</summary>
                                    <div class="help-content">
                                        <ol>
                                            <li>Start a chat with <a href="https://t.me/userinfobot" target="_blank" rel="noopener noreferrer">@userinfobot</a></li>
                                            <li>Send any message to the bot</li>
                                            <li>The bot will reply with your Chat ID</li>
                                            <li>Copy and paste the number here</li>
                                        </ol>
                                    </div>
                                </details>
                            </div>
                            <div id="telegram-error" class="form-error" role="alert" aria-live="polite"></div>
                        </div>

                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input 
                                    type="checkbox" 
                                    id="price-alerts" 
                                    name="priceAlerts" 
                                    class="checkbox-input" 
                                    checked
                                    aria-describedby="price-alerts-help"
                                >
                                <label for="price-alerts" class="checkbox-label">Price drop alerts</label>
                            </div>
                            <div id="price-alerts-help" class="form-help">Get notified when flight prices decrease</div>

                            <div class="checkbox-item">
                                <input 
                                    type="checkbox" 
                                    id="expiry-alerts" 
                                    name="expiryAlerts" 
                                    class="checkbox-input" 
                                    checked
                                    aria-describedby="expiry-alerts-help"
                                >
                                <label for="expiry-alerts" class="checkbox-label">Expiration reminders</label>
                            </div>
                            <div id="expiry-alerts-help" class="form-help">Get notified before tracking expires</div>
                        </div>
                    </fieldset>

                    <!-- Tracking Duration -->
                    <div class="form-group">
                        <label for="tracking-duration" class="form-label">Tracking Duration</label>
                        <select 
                            id="tracking-duration" 
                            name="trackingDuration" 
                            class="form-select"
                            aria-describedby="tracking-duration-help"
                        >
                            <option value="7">1 Week</option>
                            <option value="14">2 Weeks</option>
                            <option value="30" selected>1 Month</option>
                            <option value="60">2 Months</option>
                            <option value="90">3 Months</option>
                        </select>
                        <div id="tracking-duration-help" class="form-help">How long to monitor this flight route</div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn--primary btn--large" id="submit-btn">
                            <span class="btn__text">Start Tracking</span>
                            <span class="btn__loader" aria-hidden="true"></span>
                        </button>
                        <button type="reset" class="btn btn--secondary btn--large">Clear Form</button>
                    </div>
                </form>
            </section>

            <!-- Features Section -->
            <section class="features" role="region" aria-labelledby="features-title">
                <h2 id="features-title" class="features__title">Why Choose Flight Price Tracker?</h2>
                <div class="features__grid">
                    <div class="feature">
                        <div class="feature__icon" aria-hidden="true">📱</div>
                        <h3 class="feature__title">Instant Notifications</h3>
                        <p class="feature__description">
                            Get real-time price alerts directly to your Telegram app the moment prices drop.
                        </p>
                    </div>
                    <div class="feature">
                        <div class="feature__icon" aria-hidden="true">💰</div>
                        <h3 class="feature__title">Save Money</h3>
                        <p class="feature__description">
                            Never pay full price again. Our smart monitoring helps you catch the best deals.
                        </p>
                    </div>
                    <div class="feature">
                        <div class="feature__icon" aria-hidden="true">🌍</div>
                        <h3 class="feature__title">Global Coverage</h3>
                        <p class="feature__description">
                            Track flights to any destination worldwide with comprehensive airline coverage.
                        </p>
                    </div>
                    <div class="feature">
                        <div class="feature__icon" aria-hidden="true">⚡</div>
                        <h3 class="feature__title">Fast & Reliable</h3>
                        <p class="feature__description">
                            Lightning-fast price checks with 99.9% uptime guarantee for consistent monitoring.
                        </p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer__content">
                <p class="footer__text">
                    &copy; 2024 Flight Price Tracker. Built with ❤️ for travelers.
                </p>
                <div class="footer__links">
                    <a href="#" class="footer__link">Privacy Policy</a>
                    <a href="#" class="footer__link">Terms of Service</a>
                    <a href="#" class="footer__link">Support</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" role="dialog" aria-labelledby="loading-text" aria-hidden="true">
        <div class="loading-content">
            <div class="loader" aria-hidden="true"></div>
            <div id="loading-text" class="loading-text">Processing your request...</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="scripts/main.js" defer></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .catch(() => {
                    // Service worker registration failed, but app should still work
                });
        }
    </script>
</body>
</html>